pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
#include util.lua
#include load.lua
#include spell.lua
#include enemy.lua
#include player.lua
#include battle.lua

function _init()
  reload(0x8000, 0, 0x2000, "data1.p8")

  local players = {
    warrior_new("vlad"),
    elf_new("lena"),
    --wizard_new("merl")
    priestess_new("aria")
  }

  local enemies = {
    goblin_new(),
    goblin_new(),
    goblin_new(),
    zombie_new()
  }

  battle = load_battle(players, enemies)
end

function _update()
  update_battle(battle)
end

function _draw()
  cls()
  map()
  draw_battle(battle)
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007777000600000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd00000000000000070007777700
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddd00000000deed000000dd00000700077770000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddeeed0000000deed00000deed0007777077760000
00000000000000000000000000000000000000000000000000000000000000000000000ddd000000000deedee7eed0000000dd000000deed7770000000000000
0000000000000000000000000000000000000000000000000000000000000000000000deeed0000000deeedeee7ed000000000ddd0000dd00700000000000000
0000000000000000000000000000000000000000000000000000000000000000000000deeed0000000de7eedeeeed00000000de7ed0000007770000000000000
0000000000000000000000000000000000000000000000000000000000000000000000ee7eed000000de7eeeeded00000000deeeeed000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000edee7edd00000deeeedeeddd0000000deededed00000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000de7deeded0000dedeede7edeed000000de7edeed00000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000deeee7eed0000deeddeeede7ed0000000deede7d00000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000dddeeeed0000de7eedede7eed0000dd00dd0dd000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000dddd000000deeededeeed0000deed000000dd0000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd00ddd00000deed00000deed000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd000000deed000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd0000000000000000000
0000000000000000000000000000000000000000000000000003333300000000000000000000000000000000000bb00000000bb0000000000000000000000000
088888000000000000000000000000000000000000000000003333333333330000000000000bb00000000000000bb00000000bb0000000000000000000000000
00088888000000000000000000000000000000000000000003333bb3333b333000000000000bb000000000000000000000000000000000000000000700000007
000089888000000000000008888880000000000000000000033b3333b3333330000000000bbbbbb0000bb000bb0000bb00bb0000bb000000000000ff000000ff
0000089988800000000008888888000000000000000000000333333333333333000000000bbbbbb0000bb000bb0000bb00bb0000bb000000000004f5000004f5
00000899988800000000888898800000000000000000000033b333333333333300000000000bb0000bbbbbb00000000000000000000000000000044400000444
00008999998880000008888998000000000000000000000033333b33333333330000bb00000bb0000bbbbbb0000bb00000000bb000000000000fb347000fb347
0000899799988000008888999800000000088880000000003333b33333333353000bbbb000000000000bb000000bb00000000bb000bb000000feb34400feb344
0008899779998800008889979980000000000888880000000333333333333335000bbbb000000000000bb000000000000000000000bb000000ee3b3400ee3b34
00889977799998000888897799888000000000898888000000333333335535300000bb000000000000000000bb00000000000000bbbbbb00fef03334fef03334
088997777799980008889977999888000000088999888000000033333533530000000000000000000000000bbbb0000000000000bbbbbb00ffe00882ffe00882
0899777777799800088997777999880000088899799888000340035535520033000000000b0000000000000bbbb000000000000000bb0000fe00feb3fe00feb3
0099777777799800089977777999880000888997779988000b3302222224034300000000bbb0000000000000bb0000000000000000bb00000000febb0000febb
0089977777799000089977777998880000889977779988000335042444442235000000000b00000000000000000000000000000000000000000f4e0b000f4e0b
00099777779900000089977799980000008899777799880000302444444400500000000000000000000000000000000000000000000000000004440000044400
00000000000000000000000000000000000000000000000000000444242400000000000000000000000000000000000000000000000000000024420000244200
00000000000000000000000000000000000000099000000000000044442440000000000000000000000000000000000000000000000000000000070000000060
00000000000000000000000000000000000000099000000000000044442440000000000000000000000000000000000000000000000000000000007708806600
00000000000000000000000000000000000000099000000000004442444440000000000000000000000000000000000000000000000000000000000788788000
00090000000090000000000000000000000000099000000000442442424424000000000000000000000000000000000000000000000000000000000087270000
00009000000900000000000000000000000000099000000000000000000000000000000000000000000000000000000000000000000000000000000082820000
0000090000900000000000077000000000000709907000000000000000000000000000000000000000000000000000000000000000000000000000f002880000
000000099000000000000077770000000000007007000000000000000000000000000000000000000000000000000000000000000000000000000fff00280000
00000099990000000000077777700000999999000099999900000000000000000000000000000000000000000000000000000000000000000000ffeff000ff00
00000099990000000000077777700000999999000099999900000000000000000000000000000000000000000000000000000000000000000000ff0effffef00
0000000990000000000000777700000000000070070000000000000000000000000000000000000000000000000000000000000000000000000ff00ffff00ef0
000009000090000000000007700000000000070990700000000000000000000000000000000000000000000000000000000000000000000000ffe00eee000ef0
000090000009000000000000000000000000000990000000000000000000000000000000000000000000000000000000000000000000000000eee05ee5000eee
00090000000090000000000000000000000000099000000000000000000000000000000000000000000000000000000000000000000000000f0f0f555000f0ff
00000000000000000000000000000000000000099000000000000000000000000000000000000000000000000000000000000000000000000f0f00000000f0ef
00000000000000000000000000000000000000099000000000000000000000000000000000000000000000000000000000000000000000000f0000000000000f
00000000000000000000000000000000000000099000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
8687868786878687868786878687868700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9697969796979697969796979697969700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a6a7a6a7a6a7a6a7a6a7a6a7a6a7a6a700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b6b7b6b7b6b7b6b7b6b7b6b7b6b7b6b700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
