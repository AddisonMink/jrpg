pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
#include util.lua
#include animation.lua
#include combatant.lua
#include battle.lua

function _init()
  local warrior = warrior_new("vlad")
  local wizard = wizard_new("merl")
  --local elf = elf_new("lyra")
  local players = { warrior, wizard }

  local enemies = {}
  for i = 1, 4, 1 do
    add(enemies, goblin_new(i))
  end

  battle = battle_new(players, enemies)
end

function _update()
  battle:update()
end

function _draw()
  cls(2)
  battle:draw()
end

__gfx__
00000000000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000
0070070000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007f000044400000000
000770000007777000000000000bb088000000000000000000000000000000000000000000000000000000000000000000000000000000ffff00024400000000
0007700077700000070000033333b800770000088880000000000000000000000000000000000000000000000000000000000000000004f5f540024200000000
0070070007000000007000003eee3300760000086888000000000000000000000000000000000000000000000000000000000000000004444440044400000000
0000000077700000000700000ffef33007600000f668000000000000000000000000000000000000000000000000000000000000000fb347e740042400000000
0000000000000000000070060fffee0000760808ff8808800000000000000000000000000000000000000000000000000000000000feb344443b042400000000
006000000000000000000760b3333e0000078088228284480000000000000000000000000000000000000000000000000000000000ee3b34433bf44000000000
077777000000000000000642bbbbf440000884688882844800000000000000000000000000000000000000000000000000000000fef03334330effef00000000
77770000000000000000600424433440008028508825844800000000000000000000000000000000000000000000000000000000ffe008822800eee000000000
777600000000000000000000033b3000000088408850844800000000000000000000000000000000000000000000000000000000fe00feb3bef0004000000000
000000000000000000000000fb44b3000000000666650880000000000000000000000000000000000000000000000000000000000000febbbeff004000000000
00000000000000000000000fffbb33f0000000456066400000000000000000000000000000000000000000000000000000000000000f4e0b0fef000000000000
00000000000000000000000ff03b0ff0000000440004400000000000000000000000000000000000000000000000000000000000000444004f20400000000000
00000000000000000000004440000440000006440006600000000000000000000000000000000000000000000000000000000000002442002444400000000000
000000000b0000300000070000000060000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000eb003200000007708806600000000020000000700000000000000000000000000000000000000000000000000000000000000000000000000000000
00b000000eebbb30000000078878800000000025500000d700000000000000000000000000000000000000000000000000000000000000000000000000000000
000b0000bbeb8b80000000008727000000000025d00000d700000000000000000000000000000000000000000000000000000000000000000000000000000000
000b00003ebbbbbb0000000082820000000002055000007000000000000000000000000000000000000000000000000000000000000000000000000000000000
003b000bb333b7e7000000f00288000000000ddd12200d7000000000000000000000000000000000000000000000000000000000000000000000000000000000
03b0000b3ee00bb000000fff002800000000d222d550522000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bb000bbef0000000000ffeff000ff000000d121ddd5522000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bb000bbfef300000000ff0effffef000000d212d0000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bbbb00bbfe30000000ff00ffff00ef00000d111d0000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bbbbbbbef3000000ffe00eee000ef000000d1d2200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bb33bbb3feb000000eee05ee5000eee000021d11200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bb00bbb3eebb00000f0f0f555000f0ff000055000520000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b00bb003303bb0000f0f00000000f0ef000250000220000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bb0bb00000033b000f0000000000000f0002d0002d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b707b70000007b70000000000000000002d00002220000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000077777777700000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000007700000000000007777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000076000000000000777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000800760000000000007777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77000008888000000087688880000000077777000088880000000000000000000088880000000000008800000000000000000000000000000000000000000000
76000008688800000888086888000000777770000086888000000000000000000086888000000000008808888000000000000000000000000000000000000000
07600000f6680000088580f66800000077777080000f66800000000000000080000f668000000000006608688800000000000000000000000000000000000000
00760808ff880880405668ff8808800000000080008ff8288800000000000080008ff82888000000006600f66800000000000000000000000000000000000000
00078088228284480005882282844800777777886882228444800000777777886882228444800000000588ff8808000000000000000000000000000000000000
00088468888284480000088882844800066666886688828444800000066666886688828444800000000058228228800000000000000000000000000000000000
00802850882584480000008825844800000000800008828444800000000000800008828444800000000008888258800000000000000000000000000000000000
00008840885084480000008850844800000000800008858444800000000000800008858444800000000000882508800000000000000000000000000000000000
00000006666508800000066665088000000000000066066888000000000000000066066888000000000066666508800000000000000000000000000000000000
00000045606640000000456066400000000000000456006640000000000000000456006640000000000045606648000000000000000000000000000000000000
00000044000440000000440004400000000000000440000044000000000000000440000044000000000044000440000000000000000000000000000000000000
00000644000660000006440006600000000000006440000644000000000000006440000644000000000644000660000000000000000000000000000000000000
67700000888800000000088880000067030000000000000000300000000000000000077770000000000000000000000000700000000000000000000000000000
666700088820000000008882000006670300000000cc0000003000000cc00000000777700000cc00000000000000cc00707000000cc000000666000000000000
666700b888880000000c888880000470030000000cc0000000300000cc00000000777700000cc00000000000000cc00000707000cc0000006dd0600000000000
446000bb87370000000cc8757000440003000000ccc000000030000ccc0000000077700000ccc0000000000000ccc0000070000ccc0000006000000000000000
004bb00333bb0330cc00555cc0cc40000030000444cc0000000300444cc00000077770000444cc00000000000444cc00000700444cc000006660660000000000
0003bb42b3bb03305cc42c5cc0cc000000300ccccc4400000003ccccc44000000777700ccccc44000000000ccccc44007007ccccc44000000ddd666566005000
00034b442222400005c442222400000000300000eecccc000003000eecccc0000000000000eecccc0000000000eecccc0007000eecccc00000d6665655555000
000004244444b300000244444c500000003000076770000000030076770000000333300007677000033330000767700000070076770000000d66d65d65665000
00000002222bbb0000002222ccc00000000fc0c777cc00000000f55777c0000000000f333377cc0000000f333377cc000000f55777c000000d6d6656d6666500
00000044422bb30000044422cc500000000fccc777ccc0000000f5fcccc0000000000fccc7333cc000000fccc7333cc00000f5fcccc000000d6d665666d6d600
000003444043300000c44404550000000003ccc7775ccf00000035fcccc00000000000ccc777533f000000ccc777533f000075fcccc00000d6000655667d7000
000003330000000000ccc000000000000003c0007c44cf00000035007c400000000000c0007c44cf000000c0007c44cf000075007c400000d6006d655666dd00
0000000000000000000000000000000000003004ccc5c00000000304cc5000000000000004ccc5c00000000004ccc5c000000704cc500000d006dd0065566600
00000055555500000005555550000000000030c45ccc5000000003c4ccc500000000000c45ccccc50000000c45ccccc5000007c4ccc50000d606d000000550d0
00000555555550000055555555000000000030c555ccc000000003c55ccc00000000000c5cc05ccc0000000c5cc05ccc000007c55ccc00000006660000000dd0
000000555555000000055555500000000000344400444000000004440444000000000044400004440000004440000444000004440444000000006660000000dd
